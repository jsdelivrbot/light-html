{"version":3,"file":"light-html.m.js","sources":["../helpers/math.js","../helpers/constants.js","../helpers/parser.js","../index.js"],"sourcesContent":["export const UUID = () => {\n    let S4 = () => {\n       return (((1+Math.random())*0x10000)|0).toString(16).substring(1);\n    };\n    return \"p\"+(S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\n}\n","export const eventsList = [\n  \"click\",\n  \"dblclick\",\n  \"mousedown\",\n  \"mouseenter\",\n  \"mouseleave\",\n  \"mousemove\",\n  \"mouseover\",\n  \"mouseout\",\n  \"mouseup\"\n],\n SVG_TAGS = [\n  'svg', 'altGlyph', 'altGlyphDef', 'altGlyphItem', 'animate', 'animateColor',\n  'animateMotion', 'animateTransform', 'circle', 'clipPath', 'color-profile',\n  'cursor', 'defs', 'desc', 'ellipse', 'feBlend', 'feColorMatrix',\n  'feComponentTransfer', 'feComposite', 'feConvolveMatrix',\n  'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feFlood',\n  'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage',\n  'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight',\n  'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence', 'filter',\n  'font', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src',\n  'font-face-uri', 'foreignObject', 'g', 'glyph', 'glyphRef', 'hkern', 'image',\n  'line', 'linearGradient', 'marker', 'mask', 'metadata', 'missing-glyph',\n  'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialGradient', 'rect',\n  'set', 'stop', 'switch', 'symbol', 'text', 'textPath', 'title', 'tref',\n  'tspan', 'use', 'view', 'vkern'\n];\n","import {SVG_TAGS} from \"./constants.js\";\n\n{\n  String.prototype.html = function() {\n    const svgCheck = SVG_TAGS.map(tag => this.search(`<${tag}`)).filter(output => output > -1).length > 0 ? true : false;\n    const parserType = svgCheck ? \"image/svg+xml\" : \"text/html\";\n\n    let parser = new DOMParser();\n\n    let doc = parser.parseFromString(this, parserType);\n\n    return svgCheck ? doc.documentElement : doc.body.firstChild;\n  };\n}\n","import { UUID } from \"./helpers/math.js\";\nimport { eventsList } from \"./helpers/constants.js\";\nimport \"./helpers/parser.js\";\n\nclass HTML {\n  constructor(strings, values) {\n    this.values = values;\n    this.dom = this.parseHTML(strings);\n    this.render = this.render.bind(this);\n  }\n\n  render(container) {\n    let domElements = this.dom;\n    container.appendChild(domElements);\n  }\n\n  remove() {\n    this.dom.remove();\n  }\n\n  replaceTemplatesWithValues(template, values) {\n    for (let entry of values) {\n      let id = entry.id,\n        value = entry.value;\n\n      let container = template.parentNode.querySelector(`*[data-${id}]`);\n\n      if (value.nodeType == 1) {\n        container.replaceWith(value);\n      } else if (typeof value === \"function\") {\n        const eventType = entry.type;\n        container.addEventListener(eventType, value);\n      } else if (Array.isArray(value)) {\n        let fragment = document.createDocumentFragment();\n        value.forEach(item => {\n          fragment.appendChild(item.html());\n        });\n        container.replaceWith(fragment);\n      }\n\n      container.removeAttribute(`data-${id}`);\n    }\n    return template;\n  }\n\n  checkEvent(string) {\n    let checkForEvents = eventsList\n      .map(event => {\n        let result = string.search(event);\n        if (result > 0) {\n          return event;\n        } else {\n          return null;\n        }\n      })\n      .filter(result => result)[0];\n\n    return checkForEvents ? checkForEvents : false;\n  }\n\n  parseHTML(strings) {\n    let { values } = this;\n    let valuesMap = [];\n\n    let rawTemplate = strings\n      .map((string, index) => {\n        const id = UUID();\n\n        //Skip last string\n        if (index + 1 != strings.length) {\n          let checkEvent = this.checkEvent(string);\n          if (checkEvent) {\n            string = `${string}\" data-${id}=\"`;\n            valuesMap.push({ id, value: values[index], type: checkEvent });\n          } else {\n            if (typeof values[index] == \"string\") {\n              string = `${string} ${values[index]}`;\n            } else {\n              valuesMap.push({ id, value: values[index] });\n              string = `${string} <template data-${id}=\"\"> </template>`;\n            }\n          }\n        }\n        return string;\n      })\n      .reduce((prev, current) => prev + current)\n      .html();\n\n    return this.replaceTemplatesWithValues(rawTemplate, valuesMap);\n  }\n}\n\nexport default function html(strings, ...values) {\n  let valuesArray = [...values];\n  return new HTML(strings, valuesArray);\n}\n"],"names":["const","eventsList","SVG_TAGS","String","prototype","html","svgCheck","map","tag","this","search","filter","output","length","parserType","doc","DOMParser","parseFromString","documentElement","body","firstChild","HTML","strings","values","dom","parseHTML","render","bind","container","appendChild","remove","replaceTemplatesWithValues","template","entry","id","value","parentNode","querySelector","nodeType","replaceWith","addEventListener","type","Array","isArray","fragment","document","createDocumentFragment","forEach","item","removeAttribute","checkEvent","string","checkForEvents","event","result","valuesMap","rawTemplate","index","S4","Math","random","toString","substring","push","reduce","prev","current","let","valuesArray"],"mappings":"AAAOA,ICAMC,GACX,QACA,WACA,YACA,aACA,aACA,YACA,YACA,WACA,WAEDC,GACC,MAAO,WAAY,cAAe,eAAgB,UAAW,eAC7D,gBAAiB,mBAAoB,SAAU,WAAY,gBAC3D,SAAU,OAAQ,OAAQ,UAAW,UAAW,gBAChD,sBAAuB,cAAe,mBACtC,oBAAqB,oBAAqB,iBAAkB,UAC5D,UAAW,UAAW,UAAW,UAAW,iBAAkB,UAC9D,UAAW,cAAe,eAAgB,WAAY,eACtD,qBAAsB,cAAe,SAAU,eAAgB,SAC/D,OAAQ,YAAa,mBAAoB,iBAAkB,gBAC3D,gBAAiB,gBAAiB,IAAK,QAAS,WAAY,QAAS,QACrE,OAAQ,iBAAkB,SAAU,OAAQ,WAAY,gBACxD,QAAS,OAAQ,UAAW,UAAW,WAAY,iBAAkB,OACrE,MAAO,OAAQ,SAAU,SAAU,OAAQ,WAAY,QAAS,OAChE,QAAS,MAAO,OAAQ,SCtBxBC,OAAOC,UAAUC,KAAO,sBAChBC,EAAWJ,EAASK,aAAIC,UAAOC,EAAKC,WAAWF,KAAQG,gBAAOC,UAAUA,GAAU,IAAGC,OAAS,EAC9FC,EAAaR,EAAW,gBAAkB,YAI5CS,GAFS,IAAIC,WAEAC,gBAAgBR,KAAMK,GAEvC,OAAOR,EAAWS,EAAIG,gBAAkBH,EAAII,KAAKC,YCPrD,IAAMC,EACJ,SAAYC,EAASC,QACdA,OAASA,OACTC,IAAMf,KAAKgB,UAAUH,QACrBI,OAASjB,KAAKiB,OAAOC,KAAKlB,mBAGjCiB,gBAAOE,KAEKC,YADQpB,KAAKe,kBAIzBM,uBACON,IAAIM,sBAGXC,oCAA2BC,EAAUT,OAC9B,UAAaA,kBAAQ,KAAjBU,OACHC,EAAKD,EAAMC,GACbC,EAAQF,EAAME,MAEZP,EAAYI,EAASI,WAAWC,wBAAwBH,UAEtC,GAAlBC,EAAMG,WACEC,YAAYJ,QACjB,GAAqB,mBAAVA,EAAsB,GAE5BK,iBADQP,EAAMQ,KACcN,QACjC,GAAIO,MAAMC,QAAQR,GAAQ,KAC3BS,EAAWC,SAASC,2BAClBC,iBAAQC,KACHnB,YAAYmB,EAAK3C,YAElBkC,YAAYK,KAGdK,wBAAwBf,UAE7BF,eAGTkB,oBAAWC,OACLC,EAAiBnD,EAClBM,aAAI8C,UACUF,EAAOzC,OAAO2C,GACd,EACJA,EAEA,OAGV1C,gBAAO2C,UAAUA,IAAQ,UAErBF,IAAkC,eAG3C3B,mBAAUH,cACFC,EAAWd,YACb8C,KAEAC,EAAclC,EACff,aAAK4C,EAAQM,OHhEZC,EGiEMxB,EH9DH,MAHHwB,oBAC0B,OAAjB,EAAEC,KAAKC,UAAmB,GAAGC,SAAS,IAAIC,UAAU,OAEhDJ,KAAK,IAAIA,IAAK,IAAIA,IAAK,IAAIA,IAAK,IAAIA,IAAKA,IAAKA,OGiEvDD,EAAQ,GAAKnC,EAAQT,OAAQ,KAC3BqC,EAAazC,EAAKyC,WAAWC,GAC7BD,KACOC,YAAmBjB,SAClB6B,SAAO7B,QAAWX,EAAOkC,QAAcP,KAErB,iBAAjB3B,EAAOkC,KACPN,MAAa5B,EAAOkC,MAEnBM,SAAO7B,QAAWX,EAAOkC,OAC1BN,qBAA4BjB,6BAIpCiB,IAERa,gBAAQC,EAAMC,UAAYD,EAAOC,IACjC7D,cAEII,KAAKsB,2BAA2ByB,EAAaD,mBAIxD,SAA6BjC,iEAC3B6C,IAAIC,YAAkB7C,GACtB,OAAO,IAAIF,EAAKC,EAAS8C"}